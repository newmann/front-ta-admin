<pro-header [title]="'角色维护'" *ngIf="processType.length > 0 "></pro-header>
<nz-card [nzBordered]="false">
    <nz-tabset>
        <nz-tab>
            <ng-template #nzTabHeading>基本信息
            </ng-template>
            <span>
                <form nz-form [formGroup]="form" (ngSubmit)="submitForm()" role ="form">

                    <div nz-form-item nz-row>
                        <div nz-form-label nz-col [nzSm]="4">
                            <label for="name" nz-form-item-required>
                                    <span>
                                        名称
                                        <!--<nz-tooltip [nzTitle]="'What do you want other to call you'">-->
                                            <!--<i nz-tooltip class="anticon anticon-question-circle-o"></i>-->
                                        <!--</nz-tooltip>-->
                                    </span>
                            </label>
                        </div>
                        <div nz-form-control nz-col [nzSm]="20" nzHasFeedback [nzValidateStatus]="name">
                            <nz-input formControlName="name" nzPlaceHolder="最少为2个字符" [nzId]="'name'" ></nz-input>

                            <ng-container *ngIf="name.dirty && name.touched">
                                <p nz-form-explain *ngIf="name.errors?.required">必须输入角色名称</p>
                                <p nz-form-explain *ngIf="name.errors?.duplicate">输入的角色名称已经被使用</p>
                                <p nz-form-explain *ngIf="name.errors?.other">验证出现异常：{{name.errors?.msg}}</p>
                                <p nz-form-explain *ngIf="name.errors?.minlength">最少为两个字符</p>
                                <p nz-form-explain *ngIf="name.pending">验证中...</p>
                            </ng-container>
                        </div>
                    </div>
                    <div nz-form-item nz-row>
                        <div nz-form-label nz-col [nzSm]="4">
                            <label for="remarks"> 备注      </label>
                        </div>
                        <div nz-form-control nz-col [nzSm]="20" nzHasFeedback >
                            <nz-input formControlName="remarks" nzPlaceHolder="备注" [nzId]="'remarks'"></nz-input>
                        </div>
                    </div>

                    <div nz-form-item nz-row class="mb0">
                       <ng-container *ngIf="errMsg && errMsg.length > 0">
                            <nz-alert [nzType]="'error'" nzCloseable [nzMessage]="'保存数据错误'"
                                      [nzDescription]="errMsg"
                            ></nz-alert>
                        </ng-container>

                        <div nz-form-control nz-col [nzSpan]="12" [nzOffset]="4">
                            <button nz-button [nzType]="'primary'" [nzSize]="'large'" [disabled]="form.invalid || (!form.dirty)">保存</button>
                            <button nz-button (click)="resetButtonClick($event)">重置</button>


                        </div>

                    </div>

                </form>
            </span>
        </nz-tab>
        <nz-tab>
            <ng-template #nzTabHeading>权限</ng-template>
            <span>权限列表</span>
        </nz-tab>
        <nz-tab>
            <ng-template #nzTabHeading>用户</ng-template>
            <span>用户列表</span>
        </nz-tab>

        <byl-entity-logger [title]="'日志'" [entityId]="sourceId"></byl-entity-logger>
        <!--<nz-tab (nzClick)="entityLoggerClick()">-->
            <!--<ng-template #nzTabHeading>日志</ng-template>-->
            <!--<div nz-row>-->
                <!--<span>-->
                    <!--<nz-timeline >-->
                        <!--<ng-template ngFor let-item [ngForOf]="entityLogList" let-i="index">-->
                            <!--<nz-timeline-item  [nzColor]="'green'">{{item.action}}-{{item.modifyAction.modifyDateTime | _date }}  </nz-timeline-item>-->
                        <!--</ng-template>-->

                    <!--</nz-timeline>-->
                <!--</span>-->
            <!--</div>-->
            <!--<div nz-row>-->
                <!--<ng-container *ngIf="entityLogErrorMsg && entityLogErrorMsg.length > 0">-->
                    <!--<nz-alert [nzType]="'error'" nzCloseable [nzMessage]="'获取日志错误'"-->
                              <!--[nzDescription]="entityLogErrorMsg"-->
                    <!--&gt;</nz-alert>-->
                <!--</ng-container>-->

            <!--</div>-->
            <!--<div nz-row >-->
                <!--<button nz-button (click)="$event.stopPropagation(); fetchEntityLogList()">重新查询</button>-->
            <!--</div>-->
        <!--</nz-tab>-->

    </nz-tabset>
    <!--<div nz-row >-->
        <!--<div  nz-col [nzSpan]="20" [nzOffset]="4">-->
            <!--<button nz-button [nzType]="'primary'" [nzSize]="'large'" (click) = "showButtonClick($event)">show</button>-->

        <!--</div>-->

    <!--</div>-->
</nz-card>
